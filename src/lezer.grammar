@top PhiGrammar { term }

@skip {space}

@tokens {
    space{(std.whitespace | "\n")+}
    alpha {std.asciiLetter}
    num {std.digit}
    Locator {"^" (num | $[1-9] num+)}
    Attr {alpha (alpha | num)*}

    "[" "]" "(" ")"
}

Mapsto {"->"}

body { "[" ("" | mapping ("," mapping)*) "]" }

mapping { Attr Mapsto term }

term { term "." Attr | term "(" mapping ")" | body | Locator}